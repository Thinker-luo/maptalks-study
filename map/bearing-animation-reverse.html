<!DOCTYPE html>
<html>
<meta charset='UTF-8' />
<meta name='viewport' content='width=device-width, initial-scale=1' />
<title>3dtiles功能示例 - 模型单体化</title>
<style type='text/css'>
    html,
    body {
        margin: 0px;
        height: 100%;
        width: 100%;
        overflow: hidden;
    }

    .container {
        width: 100%;
        height: 50%;
        /* background-color: gray; */
    }

    .tools {
        /* position: absolute; */
        z-index: 1;
        background: white;
        width: 100%;
        position: absolute;
        z-index: 1;
        top: 0px;
        display: flex;
    }
</style>
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/maptalks/dist/maptalks.min.css' />

<script type='text/javascript' src='https://cdn.jsdelivr.net/npm/maptalks-gl/dist/maptalks-gl.min.js'></script>

<body>
    <div class="tools">
        <div>
            <button onclick="animation()">旋转动画</button>
        </div>
        <div>
            <input id="counterclockwise" type="checkbox" /><label>反向旋转</label>
        </div>

    </div>
    <div id="map" class="container"></div>

    <script>
        const map = new maptalks.Map("map", {
            center: [108.95965, 34.2189],
            zoom: 4,
            bearing: 0,
            pitch: 0
        });

        map.on('rotate', e => {
            console.log(map.getBearing());
        })

        const baseLayer = new maptalks.TileLayer('base', {
            urlTemplate: "https://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",
            subdomains: ["a", "b", "c", "d"],
            attribution: '&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>'
        }).addTo(map);

        let counterclockwise = false;

        document.querySelector('#counterclockwise').addEventListener('change', e => {
            counterclockwise = e.target.checked;
        })

        function animation() {
            map.setBearing(-10);

            map.animateTo({
                bearing: 10
            }, {
                duration: 4000,
                counterclockwise
            })
        }






    </script>
</body>

</html>